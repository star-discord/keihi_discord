\# ğŸ“˜ çµŒè²»ç”³è«‹Bot ã‚µãƒ¼ãƒãƒ¼é‹ç”¨æ‰‹é †æ›¸ï¼ˆæœ€æ–°ç‰ˆï¼‰



\## âœ… ç›®çš„



Google Cloud ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä¸Šã§ç¨¼åƒã™ã‚‹ Discord Bot ã®ã€Œæ›´æ–°ã€ã€ŒåˆæœŸåŒ–ã€ã€Œå¾©å…ƒã€ä½œæ¥­ã‚’å®‰å…¨ã‹ã¤å†ç¾æ€§é«˜ãè¡Œã†ãŸã‚ã®æ‰‹é †ã‚’ã¾ã¨ã‚ã¾ã™ã€‚



---



\## ğŸ“¦ 1. Bot æ›´æ–°æ‰‹é †ï¼ˆZIP ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦å·®ã—æ›¿ãˆï¼‰



\### ğŸ” ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§



```bash

\# 1. Bot åœæ­¢

cd ~/keihi\_discord

pm2 stop ecosystem.config.cjs



\# 2. data ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

cp -r data ~/data\_backup\_$(date +%Y%m%d\_%H%M%S)



\# 3. ZIP ã‚’å±•é–‹ã—ã€ãƒ•ã‚©ãƒ«ãƒ€åã‚’å¤‰æ›´

cd ~

unzip çµŒè²»ç”³è«‹bot.zip

rm -rf keihi\_discord

mv çµŒè²»ç”³è«‹bot keihi\_discord



\# 4. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ data ã‚’å¾©å…ƒ

cp -r ~/data\_backup\_YYYYMMDD\_HHMMSS ~/keihi\_discord/data



\# 5. èµ·å‹•ã¨å†ç™»éŒ²

cd ~/keihi\_discord

npm install

pm2 start ecosystem.config.cjs

pm2 save

```



---



\## âš™ï¸ 2. update\\\_bot.shï¼ˆè‡ªå‹•æ›´æ–°ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼‰



```bash

\#!/bin/bash



echo "ğŸ“¦ Botæ›´æ–°é–‹å§‹"



\# åœæ­¢

pm2 stop ecosystem.config.cjs



\# data ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

TIMESTAMP=$(date +%Y%m%d\_%H%M%S)

cp -r ~/keihi\_discord/data ~/data\_backup\_$TIMESTAMP



\# ZIP è§£å‡ \& ä¸Šæ›¸ã

unzip -o ~/çµŒè²»ç”³è«‹bot.zip -d ~

rm -rf ~/keihi\_discord

mv ~/çµŒè²»ç”³è«‹bot ~/keihi\_discord

cp -r ~/data\_backup\_$TIMESTAMP ~/keihi\_discord/data



\# å†æ§‹ç¯‰

cd ~/keihi\_discord

npm install

pm2 start ecosystem.config.cjs

pm2 save



echo "âœ… Botæ›´æ–°å®Œäº†"

```



> ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¿å­˜å¾Œã« `chmod +x update\_bot.sh` ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚



---



\## ğŸš€ 3. init\\\_server.shï¼ˆèµ·å‹•æ™‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— \& èµ·å‹•ãƒã‚§ãƒƒã‚¯ï¼‰



```bash

\#!/bin/bash



echo "ğŸš€ Botèµ·å‹•å‡¦ç†é–‹å§‹"



\# dataå­˜åœ¨ãƒã‚§ãƒƒã‚¯

if \[ ! -d ~/keihi\_discord/data ]; then

&nbsp; echo "âš ï¸ data ãƒ•ã‚©ãƒ«ãƒ€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ç©ºã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã¾ã™"

&nbsp; mkdir -p ~/keihi\_discord/data

else

&nbsp; # è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

&nbsp; TIMESTAMP=$(date +%Y%m%d\_%H%M%S)

&nbsp; cp -r ~/keihi\_discord/data ~/data\_backup\_$TIMESTAMP

&nbsp; echo "ğŸ“‚ data ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¾ã—ãŸ: ~/data\_backup\_$TIMESTAMP"

fi



\# èµ·å‹•å‡¦ç†

cd ~/keihi\_discord

npm install

pm2 start ecosystem.config.cjs

pm2 save



echo "âœ… Botèµ·å‹•å®Œäº†"

```



---



\## ğŸ“ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚©ãƒ«ãƒ€ã®å‘½åè¦å‰‡



\* `data\_backup\_YYYYMMDD\_HHMMSS` å½¢å¼ã§ä¿å­˜ã•ã‚Œã¾ã™

\* æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼š`cp -r data ~/data\_backup\_20250709\_090055` ãªã©



---



\## ğŸ—‘ï¸ å¤ã„ZIPãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤ï¼ˆä»»æ„ï¼‰



```bash

rm ~/çµŒè²»ç”³è«‹bot.zip

rm ~/çµŒè²»ç”³è«‹bot\_\*.zip

```



---



\## ğŸ‘¤ ä½œæˆè€…ãƒ»ç®¡ç†



\* é–‹ç™ºãƒ»é‹ç”¨ï¼šredstar hr

\* Discordç®¡ç†Bot: \[https://github.com/star-discord/keihi\\\_discord](https://github.com/star-discord/keihi\_discord)

\* ãŠå•ã„åˆã‚ã›ï¼š\[redstar.hoshir@gmail.com](mailto:redstar.hoshir@gmail.com)



